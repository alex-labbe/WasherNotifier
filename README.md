# WasherNotifier
An STM32-based washer notifier that detects washing machine vibrations with the onboard accelerometer and sends a cloud-powered notification (email/push) when the load is done.

This project implements a **washing machine activity notifier** using the  
**STM32 B-L475E-IOT01A Discovery Kit**. By monitoring vibration patterns  
with the onboard **LSM6DSL accelerometer**, the device detects when a load  
is **in progress** and when it has **finished**. Once the machine is quiet  
for a defined period, the STM32 triggers a **notification** by sending a  
message to a remote server (AWS EC2) which then relays an **email or push  
notification** to the user.

## Motion Detection Module

This project splits the motion detection logic into a dedicated C++ class for clarity and reuse. The functionality is organized across three files:

- **`core/inc/MotionDetect.hpp`**  
  Header file declaring the `MotionDetect` class.  
  - Provides a clean API: `probe()`, `init()`, `update()`, plus configuration setters like `setThreshold()` and `setLogIntervalMs()`.  
  - Encapsulates accelerometer interaction and vibration detection behind a simple interface.  
  - Keeps hardware details (registers, HAL calls) private so the rest of the code only sees high-level motion states.

- **`core/src/MotionDetect.cpp`**  
  Implementation of the `MotionDetect` class.  
  - Handles low-level I²C register reads/writes for the LSM6DSL IMU (using STM32 HAL).  
  - Converts raw accelerometer values into **g-units**, computes vector magnitude, and estimates vibration level.  
  - Logs results to UART either continuously or only on state changes (quiet ↔ shaking).  
  - Self-contained and efficient, with no reliance on global state.

- **`core/src/main.cpp`**  
  Application entry point generated by STM32CubeMX and extended with user code.  
  - Initializes peripherals (GPIO, I²C, UART, etc.).  
  - Creates a `MotionDetect` instance and runs `probe()` / `init()` in `USER CODE BEGIN 2`.  
  - Calls `motion.update()` inside the main loop to perform sensor reads and motion classification, alongside other application logic (like button handling).  
